<!doctype html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!--<script th:src="@{/js/chart.min.js}"></script>-->

    <!--  <script src="/static/js/Chart.min.js"></script>-->
    <!--<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
    <script th:src="@{/js/Chart.min.js}"></script>

    <script th:src="@{/js/transactions-chart-simple.js}"></script>


    <link th:href="@{/css/style.css}" rel="stylesheet"/>
    <title>KeepMyMoney</title>
</head>

<body>
<header th:replace="~{fragments/header :: header}"></header>

<div class="wrapper">
    <div class="content-menu">
        <form method="post" th:action="@{transactions}">

            <label> Catégorie
                <select name="categoryFilter">
                    <option th:value="null">--Toutes catégories--</option>
                    <option th:each="category : ${categoryList}"
                            th:value="${category.id}"
                            th:selected="${param.category != null} ? (${param.category[0] == category.id.toString()} ? ${category})"
                            th:text="${category.label + ' - ' + category.type.getDisplayValue() + ' - ' + category.period.getDisplayValue()}">
                    </option>
                </select>
            </label>

            <label> Type
                <select name="typeFilter">
                    <option th:value="null">--Choisir un type--</option>
                    <option th:each="t : ${T(fr.hey.keepmymoney.entities.enumerations.EType).values()}"
                            th:value="${t}"

                            th:selected="${param.type != null and param.type[0] == t.toString()} ? ${t}"
                            th:text="${t.getDisplayValue()}">
                        <!--                        th:selected="${param.type != null} ? (${param.type[0] == t.toString()} ? ${t})"-->
                        <!--                        th:selected="${param.type != null} ? (${param.type[0] == ${type} ? ${type.value()})"-->
                    </option>
                </select>
            </label>

            <label>Mois
                <select name="monthFilter">
                    <option th:value="null">--Choisir un mois--</option>
                    <option th:each="monthSelector, statIndex : ${monthsSelectorList}"
                            th:value="${statIndex.index + 1 }"
                            th:selected="${param.month != null} ? (${param.month[0] == (statIndex.index + 1).toString()} ? ${monthSelector})"
                            th:text="${monthSelector}">
                        <!--                        th:selected="${param.pageSize != null} ? (${param.pageSize[0] == sizeSelector.toString()} ? ${sizeSelector})"-->
                    </option>
                </select>
            </label>

            <label>Année
                <input type="number" name="yearFilter"
                       min="2020" max="2099"
                       step="1" value=""
                       th:value="${param.year != null} ? ${param.year[0]}"/>
            </label>

            <input type="submit">
        </form>
    </div>
    <section class="content-center-row">
        <div>
            <h2>Dépenses</h2>
            <canvas id="chartOutcome" width="400" height="400"></canvas>
            <script th:inline="javascript" type="application/javascript">
                createChart(/*[[${chartDataOutcomeTransactions}]]*/[], "chartOutcome");
            </script>
        </div>
    </section>

    <section class="content-center-row">
        <div>
            <h2>Revenus</h2>
            <canvas id="chartIncome" width="400" height="400"></canvas>
            <script th:inline="javascript" type="application/javascript">
                createChart(/*[[${chartDataIncomeTransactions}]]*/[], "chartIncome");
            </script>
        </div>
    </section>
</div> <!-- /wrapper -->
</body>
</html>